---
title: "Data Evolution Overview"
toc: true
toc-depth: 3
toc-location: left
execute:
  echo: false
---

This page provides an overview of the VISTA Oncology Data Lake's evolution across multiple releases, showcasing the progressive expansion and maturation of our comprehensive cancer research platform. The data lake has grown substantially from February 2025 through November 2025, with significant increases in patient coverage, data source integration, and analytical capabilities.

## Release Overview

The VISTA Oncology Data Lake represents a multi-institutional effort to create a comprehensive, longitudinal cancer research resource. Through systematic data releases from February through November 2025, the platform has grown from approximately 200,000 to over 217,000 patients, progressively integrating clinical OMOP data, NeuralFrame registry records, medical imaging, and molecular testing from Philips ISPM. This evolution includes specialized datasets such as the HIPPO benchmark corpus and CAP pathology forms, alongside the development of disease-specific sub-cohorts for focused research applications. The November 2025 release introduces Agentic Tide in addition to updated OMOP 5.4.

```{r data_lake_diagram, message=FALSE, warning=FALSE, fig.width=8, fig.height=6}
library(DiagrammeR)

# Create and display the diagram
grViz("
digraph vista_data_lake {
  
  # Graph attributes
  graph [layout = dot, rankdir = TB, bgcolor = '#FFFFFF', fontname = 'Arial', nodesep = 1.0, ranksep = 1.2]
  
  # Node definitions with styling
  node [shape = box, style = filled, fontname = 'Arial']
  
  # Top level - Data Lake
  DL [label = 'VISTA Oncology Data Lake\n217K+ Patients', fillcolor = '#2E86AB', fontcolor = white, fontsize = 14, width = 4, height = 1]
  
  # Main Components - All in one row
  {rank = same; OMOP; NF; PHILIPS; SPECIAL}
  OMOP [label = 'OMOP CDM 5.4.2\nClinical Data + Imaging', fillcolor = '#8dd3c7', fontsize = 12, width = 3.5, height = 0.8]
  NF [label = 'NeuralFrame\nRegistry', fillcolor = '#ffffb3', fontsize = 12, width = 2.5, height = 0.8]
  PHILIPS [label = 'Philips ISPM\nMolecular Testing', fillcolor = '#fb8072', fontsize = 12, width = 2.5, height = 0.8]
  SPECIAL [label = 'Specialized\nDatasets', fillcolor = '#F4A460', fontsize = 12, width = 2.5, height = 0.8]
  
  # Sub-dataset boxes - one large box per main component
  OMOP_SUB [label = 'Imaging (CT | PET | MRI | X-Ray)\nDICOM Metadata | Anatomic Regions | \nDemographics | Encounters | Diagnoses | Procedures\nMedications | Lab Results | Clinical Notes | Tumor Board', fillcolor = '#E0F2F1', fontsize = 10, width = 3.5, height = 2.0, shape = box]
  
  NF_SUB [label = 'Cancer Diagnoses\nTreatments\nOutcomes\nMiscellaneous Details', fillcolor = '#FFFEF0', fontsize = 10, width = 2.5, height = 2.0, shape = box]
  
  PHILIPS_SUB [label = 'STAMP\nHeme-STAMP\nFoundationOne\nSTAMP Add-On Metadata', fillcolor = '#FFE4E1', fontsize = 10, width = 2.5, height = 2.0, shape = box]
  
  SPECIAL_SUB [label = 'HIPPO Benchmark (1,394 notes)\nCAP Pathology Forms\nEpic Media Server PDFs\nTide 2.0 Agentic AI', fillcolor = '#FFF8DC', fontsize = 10, width = 2.5, height = 2.0, shape = box]
  
  # Connections from Data Lake to main components
  DL -> OMOP [penwidth = 2, color = '#457B9D']
  DL -> NF [penwidth = 2, color = '#457B9D']
  DL -> PHILIPS [penwidth = 2, color = '#457B9D']
  DL -> SPECIAL [penwidth = 2, color = '#457B9D']
  
  # Connections from main components to sub-dataset boxes
  OMOP -> OMOP_SUB [arrowhead = none, color = '#8dd3c7', penwidth = 3]
  NF -> NF_SUB [arrowhead = none, color = '#ffffb3', penwidth = 3]
  PHILIPS -> PHILIPS_SUB [arrowhead = none, color = '#fb8072', penwidth = 3]
  SPECIAL -> SPECIAL_SUB [arrowhead = none, color = '#F4A460', penwidth = 3]
}
")
```

### February 2025 - Foundation Release

The inaugural February 2025 release established the core OMOP5.3-CDM foundation of our data lake, providing:

- **Core OMOP Dataset**: Comprehensive patient demographics, encounters, diagnoses, and procedures following OMOP CDM 5.3.1 standards
- **Clinical Infrastructure**: Essential clinical data including medications (RxNorm), laboratory results (LOINC), and procedure codes (CPT)
- **NeuralFrame Diagnoses**: Initial integration of Stanford Cancer Registry diagnosis data
- **Quality Framework**: Initial data validation and PHI scrubbing processes to ensure research readiness
- **Patient Base**: Approximately 200,000+ oncology patients forming the foundational cohort

This release prioritized data quality and standardization, establishing the structural foundation for subsequent data integration efforts.

### May 2025 - Integration Expansion

The May 2025 release marked a significant evolution with the integration of multiple specialized data sources:

- **NeuralFrame Integration**: Addition of Stanford Cancer Registry data, providing comprehensive cancer case information including miscellaneous, treatments, and outcomes
- **Imaging Data**: Integration of OMOP image occurrence data, linking patients to their diagnostic imaging studies
- **Philips ISPM**: Introduction of molecular testing data including STAMP, Heme-STAMP, and FoundationOne results
- **Enhanced Coverage**: Substantial increase in patient coverage across multiple data domains

This release transformed the data lake from a primarily clinical dataset to a multi-modal research platform supporting translational cancer research.

### August 2025 - Depth and Specialization

The August 2025 release focused on increasing data depth and developing specialized research capabilities:

- **STAMP Add-On Dataset**: Integrated detailed genomic testing metadata including assay types (STAMP, Heme-STAMP), pipeline versions, and test identifiers for comprehensive molecular profiling analysis
- **HIPPO Benchmark**: Added 1,394 expert-annotated clinical notes corpus for PHI identification and de-identification methodology validation
- **Lung Resection CAP Forms**: Introduced fully identified structured pathology reports combining standardized College of American Pathologists (CAP) templates with unstructured clinical information
- **Epic Media Server Documents**: Integrated all PDF documents from third-party providers accessible via EPIC Media/Lab tabs and Mulesoft API
- **Enhanced Metadata**: Expanded technical documentation including DICOM dictionary, STAMP gene panels, and genomic BED files

This release established the data lake as a comprehensive resource for both population-level and detailed clinical research, while adding critical benchmarking datasets for data quality and PHI scrubbing validation.

### November 2025 - Advanced Analytics 

The November 2025 release represents a major technical advancement with comprehensive OMOP upgrade and enhanced data capabilities:

- **OMOP 5.3 to 5.4 Upgrade**: Migrated to OMOP CDM version 5.4.2 with new tables, enhanced field linking capabilities, and updated naming conventions for improved data interoperability. This includes the addition of several new tables (not yet populated) as well as additional fields for linking between tables, along with several other minor name changes. A full description of the CDM changes can be found [here](https://ohdsi.github.io/CommonDataModel/cdm54Changes.html). 
  - **Vocabulary Modernization**: Updated from January 2023 to August 2025 OHDSI vocabulary, incorporating 2.5 years of concept mappings, domain changes, and standardization improvements
  - **Pipeline Redesign**: Overhauled ETL processes with standardized filtering (events from 2000+, flexible visit requirements) and enhanced JSON-formatted source value fields for improved data traceability
- **Genomic Tests Expansion**: Expanded Stanford test types coverage including comprehensive FoundationOne molecular profiling results
- **Agentic Tide Integration**: Advanced analytics capabilities for automated data processing and analysis

This release modernizes the technical infrastructure while maintaining backward compatibility, positioning the data lake for next-generation research applications and enhanced analytical capabilities.

## Release Summary Table

The following table provides a comprehensive overview of data and schema changes across all releases:

```{r release_summary_table, message=FALSE, warning=FALSE}
library(DT)
library(dplyr)

# Create release summary data
release_summary <- tibble::tribble(
  ~Release, ~OMOP_Version, ~NeuralFrame, ~Philips_ISPM, ~Key_Data_Additions, ~Schema_Changes, ~Special_Datasets,
  
  "February 2025",
  "OMOP CDM 5.3.1",
  "Diagnoses only",
  "Not available",
  "Core OMOP tables, NeuralFrame diagnoses, Clinical data (RxNorm, LOINC, CPT)",
  "Initial OMOP 5.3 schema implementation with standard clinical domains",
  "N/A",
  
  "May 2025",
  "Continued coverage",
  "Continued coverage + Full registry (diagnoses, treatments, outcomes, miscellaneous)",
  "Initial release (STAMP, Heme-STAMP, FoundationOne)",
  "<b>Full NeuralFrame registry, Image occurrence data, Philips ISPM <b>",
  "Added person_id to all datasets for improved linkage; Updated tumor board definition",
  "N/A",
  
  "August 2025",
  "Continued coverage",
  "Continued coverage",
  "Continued coverage + STAMP Add-On metadata",
  "<b>STAMP Add-On metadata, Epic Media Server PDFs<b>",
  "No schema changes; continued data enrichment",
  "<b>HIPPO Benchmark, CAP Forms (lung resection pathology)<b>",
  
  "November 2025",
  "<b>OMOP CDM 5.4.2<b>",
  "Continued coverage",
  "Continued coverage + Expanded genomic testing coverage",
  "<b>Expanded genomic testing, Agentic Tide integration<b>",
  "Major upgrade: Updated vocab, enhanced field linking, JSON-formatted source values",
  "Enhanced ETL pipeline with updated vocabulary"
)

# Format the table with improved styling
datatable(
  release_summary,
  colnames = c(
    "Release",
    "OMOP Version",
    "NeuralFrame",
    "Philips ISPM",
    "Key Data Additions",
    "Schema Changes",
    "Special Datasets"
  ),
  caption = "Data Lake Evolution: Release Comparison Summary",
  options = list(
    pageLength = 5,
    dom = 't',
    columnDefs = list(
      list(width = '12%', targets = 0),
      list(width = '12%', targets = 1),
      list(width = '13%', targets = 2),
      list(width = '13%', targets = 3),
      list(width = '20%', targets = 4),
      list(width = '17%', targets = 5),
      list(width = '13%', targets = 6)
    ),
    scrollX = TRUE
  ),
  rownames = FALSE,
  escape = FALSE,
  class = 'cell-border stripe'
) %>%
  formatStyle(
    columns = 0:6,
    fontSize = '12px'
  )
```

## Patient Identifier Keys by Dataset

The following table shows the key identifier fields used in each dataset across releases, reflecting the evolution toward standardized patient linkage:

```{r identifier_keys_table, message=FALSE, warning=FALSE}
library(DT)
library(dplyr)

# Create identifier keys data
identifier_keys <- tibble::tribble(
  ~Dataset, ~February_2025, ~May_2025, ~August_2025, ~November_2025,
  
  "OMOP Clinical",
  "person_id, person_source_value",
  "person_id, person_source_value",
  "person_id, person_source_value",
  "person_id, <b>person_source_value<sup>†</sup></b>",
  
  "NeuralFrame Registry",
  "MRN, DOB",
  "stanford_patient_uid",
  "stanford_patient_uid",
  "stanford_patient_uid",
  
  "Image Occurrence",
  "person_id",
  "person_id",
  "person_id",
  "person_id",
  
  "Philips ISPM",
  "Not available",
  "stanford_patient_uid, person_id",
  "stanford_patient_uid, person_id",
  "stanford_patient_uid, person_id",
  
  "Tumor Board",
  "MRN, DOB",
  "person_id",
  "person_id",
  "person_id",
  
)

# Format the table
datatable(
  identifier_keys,
  colnames = c(
    "Dataset",
    "February 2025",
    "May 2025",
    "August 2025",
    "November 2025"
  ),
  caption = "Patient Identifier Keys Evolution by Dataset and Release",
  options = list(
    pageLength = 10,
    dom = 't',
    columnDefs = list(
      list(width = '20%', targets = 0),
      list(width = '20%', targets = 1:4),
      list(className = 'dt-left', targets = 0),
      list(className = 'dt-center', targets = 1:4)
    ),
    scrollX = TRUE
  ),
  rownames = FALSE,
  escape = FALSE,
  class = 'cell-border stripe'
) %>%
  formatStyle(
    columns = 0:4,
    fontSize = '12px'
  ) %>%
  formatStyle(
    columns = 1:4,
    backgroundColor = styleEqual(
      c("Not available"),
      c('#f0f0f0')
    )
  )
```

**Key Identifier Notes:**

- **person_id**: OMOP standard identifier used across clinical tables for patient linkage
- **person_source_value**: Source system identifier in OMOP tables that joins with stanford_patient_uid for cross-dataset linkage
- **stanford_patient_uid**: Stanford-specific unique patient identifier used in NeuralFrame and Philips ISPM datasets which is concatenation of MRN and DOB
- **MRN, DOB**: Medical Record Number and Date of Birth combination (used in February 2025 before standardization)

**Note**: **<sup>†</sup>November 2025 OMOP 5.4 Update:** In the November 2025 release, `person_source_value` is JSON-formatted. To join with `stanford_patient_uid`, extract the field using: `JSON_VALUE(person_source_value, '$.stanford_patient_uid')`

**Additional Linkage Fields:**

- Image Occurrence table also includes **note_id**, **visit_occurrence_id**, and **accession_number** for linking to clinical notes, visits, and imaging studies



The transition from MRN/DOB combinations to standardized identifiers (person_id, stanford_patient_uid) in May 2025 significantly improved cross-dataset linkage capabilities and simplified cohort construction workflows.

## Multi-Release Statistical Overview

For detailed statistical analysis and interactive visualizations of data coverage trends across all releases, see the [Data Coverage Trends](nov_2025/data_coverage_trends.qmd) page.

For each data release (February, May, August, and November 2025), we examine:

- Demographic characteristics (cohort size, age distribution, gender, race)
- Data source coverage across integrated systems (NeuralFrame, Philips ISPM, Imaging, Tumor Board)
- OMOP clinical data availability (diagnoses, procedures, medications, lab results, clinical notes)
- Tumor board and thoracic sub-cohort populations with multi-modal data integration
- Imaging modality coverage and metadata diversity
- Molecular testing patterns and genomic profiling distributions
