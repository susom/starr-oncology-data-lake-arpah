---
title: "STAMP Versions"
execute:
  echo: false
---

### STAMP Versions


```{r, message=FALSE, warning=FALSE}

dat=readr::read_tsv(file="/workspaces/starr-oncology-data-lake-arpah/src/stamp_data_dict/oncology_stamp_metadata.tsv")


DT::datatable(dat, options = list(pageLength = 25))
datv1=dat%>% filter(pipeline_version=="v1" & assay_performed=="STAMP")


```

---
title: "STAMP Versions"
execute:
  echo: false
---

### STAMP Versions


```{r, message=FALSE, warning=FALSE}
library(dplyr)

# Read the data
dat = readr::read_tsv(file="/workspaces/starr-oncology-data-lake-arpah/src/stamp_data_dict/oncology_stamp_metadata.tsv")

# Create the subsets
stamp_v1 = dat %>% 
  filter(pipeline_version == "v1" & assay_performed == "STAMP")

stamp_v2 = dat %>% 
  filter(pipeline_version == "v2" & assay_performed == "STAMP")

nonstamp_v1 = dat %>% 
  filter(pipeline_version == "v3" & assay_performed != "STAMP")

nonstamp_other = dat %>% 
  filter(pipeline_version == "v4" & assay_performed != "STAMP")

# Display summary counts
summary_df = data.frame(
  Category = c("STAMP v1", "STAMP other versions", "Non-STAMP v1", "Non-STAMP other versions"),
  Count = c(nrow(stamp_v1), nrow(stamp_other), nrow(nonstamp_v1), nrow(nonstamp_other))
)

# Display the summary table
DT::datatable(summary_df, options = list(pageLength = 10))

# Display the full data table
DT::datatable(dat, options = list(pageLength = 25))

# Save the subsets to TSV files
write_tsv(stamp_v1, "stamp_v1.tsv")
write_tsv(stamp_other, "stamp_other_versions.tsv")
write_tsv(nonstamp_v1, "nonstamp_v1.tsv")
write_tsv(nonstamp_other, "nonstamp_other_versions.tsv")
```